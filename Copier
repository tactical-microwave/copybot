import tkinter as tk
from tkinter import ttk
from tkinter import font, filedialog, messagebox
import pyperclip
import os

tot=list()
final=list()
txt=str(" ")
active=True
edit=False

def collecting():
    global txt
    global active
    if(active is True):
        if (txt!=pyperclip.paste()):
            txt=pyperclip.paste()
            tot.append(txt)
            textbox.config(state="normal")
            textbox.insert(tk.INSERT,txt)
            final=textbox.get("1.0",tk.END)
            textbox.config(state="disabled")
        root.after(10, collecting)
    else:
        return

def clear_all():
    tot.clear()
    final.clear()
    textbox.config(state="normal")
    textbox.delete('1.0',tk.END)
    textbox.config(state="disabled")

def save_file():
    f=filedialog.asksaveasfile(mode="a", defaultextension=".txt")
    final=textbox.get("1.0",tk.END)
    if f is None:
        return
    for i in final:
        f.write(i)

def mode_change():
    global active
    if(active is True):
        active=False
        label["text"]="Paused"
        label["bg"]="#F1948A"
    else:
        active=True
        pyperclip.copy(" ")
        root.after(10,collecting)
        label["text"]="Working"
        label["bg"]="#82E0AA"

def edit_data():
    global edit
    if(edit is False):
        edit=True
        textbox.config(state="normal")
        #final=textbox.get("1.0",tk.END)
        label_2["text"]="Editable"
        label_2["bg"]="#F1948A"

    else:
        edit=False
        textbox.config(state="disabled")
        #final=textbox.get("1.0",tk.END)
        label_2["text"]="Uneditable"
        label_2["bg"]="#82E0AA"

root=tk.Tk()

root.geometry("600x600")

scrollbar=tk.Scrollbar(root)
scrollbar.pack(side=tk.RIGHT,fill="y")

menubar=tk.Menu(root)
root.config(menu=menubar)
submenu_1=tk.Menu(menubar, tearoff=0)
menubar.add_cascade(label="File", menu=submenu_1)
submenu_1.add_command(label="Save As", command=save_file)
submenu_1.add_command(label="Clear All", command=clear_all)
submenu_1.add_command(label="Exit", command=root.destroy)


submenu_2=tk.Menu(menubar, tearoff=0)
menubar.add_cascade(label="Options", menu=submenu_2)
submenu_2.add_command(label="Start/Pause", command=mode_change)
submenu_2.add_command(label="Edit", command=edit_data)

frame=tk.Frame(root)
frame.place(relwidth=1,relheight=1)

label=tk.Label(frame, bg="#82E0AA", text="Working")
label.place(relx=0,rely=0,relwidth=1,relheight=0.05)

label_2=tk.Label(frame, bg="#82E0AA", text="Uneditable")
label_2.place(relx=0,rely=0.05,relwidth=1,relheight=0.05)

textbox=tk.Text(frame, bg='#D0D3D4', height=2000, bd=5, font=("Calibri",10), yscrollcommand=scrollbar.set)
textbox.place(relx=0,rely=0.1, relwidth=1,relheight=0.9)
textbox.config(state="disabled")

scrollbar.config(command=textbox.yview)

pyperclip.copy(" ")
collecting()

root.mainloop()

